<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±äº¬æ—…è¨˜ | 4æ—¥3å¤œè¡Œç¨‹åŠ©æ‰‹</title>
    <!-- å¼•å…¥ Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Chart.js ç”¨æ–¼åœ“é¤…åœ– -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- å¼•å…¥ Font Awesome åœ–æ¨™ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- å¼•å…¥ Google å­—é«” -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Space Grotesk', 'Noto Sans TC', sans-serif;
        }
        
        body {
            background-color: #0a0a0f;
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            color: #f0f0f0;
        }
        
        /* éœ“è™¹ç‡ˆèƒŒæ™¯æ•ˆæœ */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 191, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 128, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(0, 255, 157, 0.05) 0%, transparent 50%);
            z-index: -2;
        }
        
        /* ç¶²æ ¼èƒŒæ™¯ */
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: -1;
            opacity: 0.3;
        }
        
        /* ä¸»å®¹å™¨ */
        .main-container {
            padding: 0;
            position: relative;
            overflow-x: hidden;
        }
        
        /* é ‚éƒ¨å°èˆª - å´é‚Šæ¬„æ¨¡å¼ */
        .side-nav {
            position: fixed;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            background: rgba(20, 20, 30, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 0 20px 20px 0;
            padding: 20px 12px;
            box-shadow: 5px 0 20px rgba(0, 0, 0, 0.5);
            border-right: 1px solid rgba(0, 191, 255, 0.2);
        }
        
        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 25px 0;
            background: rgba(255, 255, 255, 0.2);
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-dot.active {
            background: #00bfff;
            box-shadow: 0 0 10px #00bfff;
            transform: scale(1.3);
        }
        
        .nav-dot:hover {
            transform: scale(1.5);
            background: #ff0080;
        }
        
        .nav-dot::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(20, 20, 30, 0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            border: 1px solid rgba(0, 191, 255, 0.3);
        }
        
        .nav-dot:hover::after {
            opacity: 1;
        }
        
        /* æ™‚é–“è»¸æ¨£å¼ */
        .timeline {
            position: relative;
            padding-left: 40px;
            margin: 40px 0;
        }
        
        .timeline::before {
            content: "";
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #00bfff, #ff0080, #00ff9d);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 40px;
        }
        
        .timeline-dot {
            position: absolute;
            left: -40px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff9d;
            box-shadow: 0 0 10px #00ff9d;
        }
        
        .timeline-content {
            background: rgba(30, 30, 45, 0.7);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(0, 191, 255, 0.2);
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }
        
        .timeline-content:hover {
            transform: translateX(5px);
            border-color: #00bfff;
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.3);
        }
        
        /* å¡ç‰‡æ¨£å¼ - å…¨æ¯æ•ˆæœ */
        .hologram-card {
            background: rgba(20, 20, 30, 0.7);
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            border: 1px solid rgba(0, 191, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .hologram-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 191, 255, 0.1), transparent);
            transition: left 0.7s;
        }
        
        .hologram-card:hover::before {
            left: 100%;
        }
        
        .hologram-card:hover {
            border-color: rgba(0, 191, 255, 0.4);
            box-shadow: 0 0 30px rgba(0, 191, 255, 0.2);
        }
        
        /* èˆªç­å¡ç‰‡ - ç‰¹æ®Šè¨­è¨ˆ */
        .flight-holo {
            background: linear-gradient(135deg, rgba(0, 30, 60, 0.8), rgba(0, 60, 80, 0.8));
            border: 1px solid rgba(0, 191, 255, 0.3);
            position: relative;
        }
        
        .flight-holo::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #00bfff, #00ff9d, #ff0080);
            border-radius: 16px 16px 0 0;
        }
        
        /* å¤©æ°£å¡ç‰‡ */
        .weather-holo {
            background: linear-gradient(135deg, rgba(0, 40, 80, 0.8), rgba(0, 80, 100, 0.8));
            border: 1px solid rgba(0, 191, 255, 0.3);
        }
        
        /* åœ°åœ–å€åŸŸå¡ç‰‡ */
        .map-area {
            position: relative;
            height: 200px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .map-area::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            z-index: 1;
        }
        
        .map-area:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.4);
        }
        
        .area-label {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 2;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        /* è³¼ç‰©æ¸…å–®é …ç›® */
        .shopping-holo {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(40, 40, 60, 0.6);
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 0, 128, 0.1);
            transition: all 0.3s;
        }
        
        .shopping-holo:hover {
            border-color: rgba(255, 0, 128, 0.4);
            transform: translateX(5px);
        }
        
        /* é€²åº¦æ¢ - éœ“è™¹æ•ˆæœ */
        .neon-progress {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        
        .neon-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00bfff, #00ff9d);
            border-radius: 5px;
            position: relative;
            transition: width 1s ease-out;
        }
        
        .neon-progress-bar::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: neon-shimmer 2s infinite;
        }
        
        @keyframes neon-shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* æŒ‰éˆ• - éœ“è™¹æ•ˆæœ */
        .neon-btn {
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: 2px solid #00bfff;
            border-radius: 8px;
            padding: 14px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .neon-btn:hover {
            background: rgba(0, 191, 255, 0.2);
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.5);
            transform: translateY(-2px);
        }
        
        .neon-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .neon-btn:hover::before {
            left: 100%;
        }
        
        /* è¼¸å…¥æ¡† */
        .cyber-input {
            background: rgba(30, 30, 45, 0.7);
            border: 1px solid rgba(0, 191, 255, 0.3);
            border-radius: 8px;
            padding: 14px 18px;
            color: white;
            font-size: 16px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .cyber-input:focus {
            outline: none;
            border-color: #00bfff;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.3);
        }
        
        /* æ¨™ç±¤ */
        .cyber-tag {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
            background: rgba(0, 191, 255, 0.15);
            color: #00bfff;
            border: 1px solid rgba(0, 191, 255, 0.3);
        }
        
        /* é é¢æ¨™é¡Œ */
        .page-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 30px;
            position: relative;
            display: inline-block;
        }
        
        .page-title::after {
            content: "";
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #00bfff, #ff0080);
            border-radius: 2px;
        }
        
        /* æ¨¡æ…‹æ¡† */
        .cyber-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-content {
            background: rgba(20, 20, 30, 0.95);
            border-radius: 20px;
            width: 100%;
            max-width: 420px;
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(0, 191, 255, 0.3);
            box-shadow: 0 0 40px rgba(0, 191, 255, 0.2);
        }
        
        /* é é¢åˆ‡æ›å‹•ç•« */
        .page-enter-active, .page-leave-active {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .page-enter-from, .page-leave-to {
            opacity: 0;
            transform: translateX(30px);
        }
        
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(30, 30, 45, 0.5);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00bfff, #ff0080);
            border-radius: 10px;
        }
        
        /* èˆªç­æ™‚é–“é¡¯ç¤º */
        .flight-time-neon {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, #00bfff, #00ff9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(0, 191, 255, 0.3);
        }
        
        /* é‡‘é¡é¡¯ç¤º */
        .amount-neon {
            font-size: 22px;
            font-weight: 700;
            color: #00ff9d;
            text-shadow: 0 0 8px rgba(0, 255, 157, 0.4);
        }
        
        /* æ—¥æ›†æ¨£å¼ */
        .cyber-calendar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .calendar-day {
            background: rgba(30, 30, 45, 0.7);
            border-radius: 12px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .calendar-day.active {
            background: rgba(0, 191, 255, 0.2);
            border-color: #00bfff;
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.3);
        }
        
        .calendar-day:hover {
            transform: translateY(-5px);
            border-color: #ff0080;
        }
    </style>
</head>
<body>
    <div id="app" class="min-h-screen">
        <!-- å´é‚Šå°èˆªæ¬„ -->
        <div class="side-nav">
            <div 
                v-for="tab in tabs" 
                :key="tab.id"
                @click="activeTab = tab.id"
                :class="['nav-dot', activeTab === tab.id ? 'active' : '']"
                :data-tooltip="tab.name"
            ></div>
        </div>

        <!-- ä¸»å…§å®¹å€åŸŸ -->
        <div class="main-container p-5">
            <!-- è¡Œç¨‹é é¢ -->
            <div v-if="activeTab === 'schedule'" class="page-enter-active">
                <!-- é ‚éƒ¨è³‡è¨Š -->
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h1 class="page-title">{{ appTitle }}</h1>
                        <div class="flex items-center mt-3">
                            <i class="fas fa-calendar-alt mr-3 text-cyan-400"></i>
                            <p class="text-gray-300">1æœˆ15-18æ—¥ â€¢ 4æ—¥3å¤œ</p>
                        </div>
                    </div>
                    <button @click="editAppTitle" class="neon-btn p-3">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                
                <!-- èˆªç­è³‡è¨Šå¡ç‰‡ -->
                <div class="flight-holo hologram-card">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">âœˆï¸ èˆªç­è³‡è¨Š</h2>
                        <button @click="editFlightInfo" class="neon-btn p-2 text-sm">
                            <i class="fas fa-edit mr-2"></i>ç·¨è¼¯
                        </button>
                    </div>
                    
                    <!-- å‡ºç™¼èˆªç­ -->
                    <div class="mb-10">
                        <h3 class="text-lg font-bold mb-4 text-cyan-300">{{ flightInfo.departure.title }}</h3>
                        <div class="grid grid-cols-3 gap-4 items-center">
                            <div class="text-center">
                                <div class="flight-time-neon">{{ flightInfo.departure.departureTime }}</div>
                                <div class="text-lg font-bold mt-2">{{ flightInfo.departure.departureCode }}</div>
                                <div class="text-sm text-gray-400 mt-1">{{ flightInfo.departure.departureAirport }}</div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-xl font-bold text-pink-400">{{ flightInfo.departure.duration }}</div>
                                <div class="text-sm text-gray-400 mt-1">{{ flightInfo.departure.flightNumber }}</div>
                                <div class="text-xs text-gray-500 mt-1">
                                    <i class="fas fa-plane"></i> ç›´é£›
                                </div>
                            </div>
                            
                            <div class="text-center">
                                <div class="flight-time-neon">{{ flightInfo.departure.arrivalTime }}</div>
                                <div class="text-lg font-bold mt-2">{{ flightInfo.departure.arrivalCode }}</div>
                                <div class="text-sm text-gray-400 mt-1">{{ flightInfo.departure.arrivalAirport }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å›ç¨‹èˆªç­ -->
                    <div>
                        <h3 class="text-lg font-bold mb-4 text-cyan-300">{{ flightInfo.return.title }}</h3>
                        <div class="grid grid-cols-3 gap-4 items-center">
                            <div class="text-center">
                                <div class="flight-time-neon">{{ flightInfo.return.departureTime }}</div>
                                <div class="text-lg font-bold mt-2">{{ flightInfo.return.departureCode }}</div>
                                <div class="text-sm text-gray-400 mt-1">{{ flightInfo.return.departureAirport }}</div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-xl font-bold text-pink-400">{{ flightInfo.return.duration }}</div>
                                <div class="text-sm text-gray-400 mt-1">{{ flightInfo.return.flightNumber }}</div>
                                <div class="text-xs text-gray-500 mt-1">
                                    <i class="fas fa-plane"></i> ç›´é£›
                                </div>
                            </div>
                            
                            <div class="text-center">
                                <div class="flight-time-neon">{{ flightInfo.return.arrivalTime }}</div>
                                <div class="text-lg font-bold mt-2">{{ flightInfo.return.arrivalCode }}</div>
                                <div class="text-sm text-gray-400 mt-1">{{ flightInfo.return.arrivalAirport }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ—¥æ›†é¸æ“‡ -->
                <div class="cyber-calendar">
                    <div 
                        v-for="day in tripDays" 
                        :key="day.id"
                        @click="selectedDay = day.id"
                        :class="['calendar-day', selectedDay === day.id ? 'active' : '']"
                    >
                        <div class="font-bold text-2xl">{{ day.date }}</div>
                        <div class="text-sm mt-2">{{ day.day }}</div>
                        <div class="text-xs mt-3 text-cyan-300">{{ day.area }}</div>
                    </div>
                </div>
                
                <!-- è¡Œç¨‹æ™‚é–“è»¸ -->
                <div class="timeline">
                    <div v-for="(item, index) in selectedDaySchedule.items" :key="index" class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="flex items-center mb-3">
                                        <div class="font-bold text-cyan-300 text-xl mr-4">{{ item.time }}</div>
                                        <div class="font-bold text-white text-lg">{{ item.title }}</div>
                                    </div>
                                    <div class="text-sm text-gray-300 mb-2">
                                        <i class="fas fa-map-marker-alt mr-2 text-pink-400"></i>{{ item.location }}
                                    </div>
                                    <div v-if="item.note" class="text-sm text-gray-300 bg-gray-900/50 p-3 rounded-lg">
                                        <i class="fas fa-info-circle mr-2 text-green-400"></i>{{ item.note }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- åœ°åœ–é é¢ -->
            <div v-if="activeTab === 'map'" class="page-enter-active">
                <h1 class="page-title mb-8">ğŸ—ºï¸ æ±äº¬åœ°åœ–å°èˆª</h1>
                
                <!-- æœç´¢å€åŸŸ -->
                <div class="hologram-card mb-8">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-search text-cyan-400 mr-3 text-xl"></i>
                        <input 
                            type="text" 
                            v-model="searchLocation" 
                            placeholder="æœå°‹æ±äº¬åœ°é»..." 
                            class="cyber-input"
                        >
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="flex items-center">
                            <i class="fas fa-map-pin text-pink-400 mr-2"></i>
                            <span class="font-medium">èµ·é»ï¼š</span>
                        </div>
                        <input type="text" v-model="startLocation" placeholder="ä¾‹å¦‚ï¼šæ± è¢‹é§…" class="cyber-input">
                        
                        <div class="flex items-center">
                            <i class="fas fa-flag text-green-400 mr-2"></i>
                            <span class="font-medium">çµ‚é»ï¼š</span>
                        </div>
                        <input type="text" v-model="endLocation" placeholder="ä¾‹å¦‚ï¼šæ–°å®¿é§…" class="cyber-input">
                    </div>
                    
                    <button @click="openGoogleMaps" class="neon-btn w-full py-4 text-lg">
                        <i class="fas fa-directions mr-3"></i>é–‹å§‹å°èˆª
                    </button>
                </div>
                
                <!-- ç†±é–€å€åŸŸ -->
                <h2 class="text-2xl font-bold mb-6">ğŸ“ è¡Œç¨‹å€åŸŸ</h2>
                
                <div @click="searchLocation = 'æ± è¢‹'; searchOnMap()" class="map-area" style="background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'); background-size: cover;">
                    <div class="area-label">æ± è¢‹</div>
                    <div class="absolute top-4 right-4 bg-black/50 px-3 py-1 rounded-full text-sm">è³¼ç‰©ä¸­å¿ƒ</div>
                </div>
                
                <div @click="searchLocation = 'æ–°å®¿'; searchOnMap()" class="map-area" style="background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1549693578-d683be217e58?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'); background-size: cover;">
                    <div class="area-label">æ–°å®¿</div>
                    <div class="absolute top-4 right-4 bg-black/50 px-3 py-1 rounded-full text-sm">è§€æ™¯åœ°æ¨™</div>
                </div>
                
                <div @click="searchLocation = 'æ¾€è°·'; searchOnMap()" class="map-area" style="background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1542051841857-5f90071e7989?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'); background-size: cover;">
                    <div class="area-label">æ¾€è°·</div>
                    <div class="absolute top-4 right-4 bg-black/50 px-3 py-1 rounded-full text-sm">è³¼ç‰©å¤©å ‚</div>
                </div>
                
                <div @click="searchLocation = 'æ©«æ¿±'; searchOnMap()" class="map-area" style="background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1528164344705-47542687000d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'); background-size: cover;">
                    <div class="area-label">æ©«æ¿±</div>
                    <div class="absolute top-4 right-4 bg-black/50 px-3 py-1 rounded-full text-sm">æ¼”å”±æœƒå ´åœ°</div>
                </div>
                
                <!-- åœ°åœ–é€£çµ -->
                <div class="hologram-card mt-8">
                    <p class="text-gray-300 mb-6">æ‚¨æ¨™è¨˜çš„æ± è¢‹ã€æ–°å®¿ã€æ¾€è°·åœ°é»</p>
                    <a href="https://maps.app.goo.gl/1ZvA8hVro3fwYcPf6?g_st=ac" target="_blank" class="block w-full bg-gradient-to-r from-cyan-600 to-pink-600 text-white py-4 rounded-xl text-center font-bold text-lg shadow-lg hover:shadow-xl transition-all">
                        <i class="fas fa-map-marked-alt mr-3"></i>æ‰“é–‹Googleåœ°åœ–
                    </a>
                </div>
            </div>

            <!-- è¨˜å¸³é é¢ -->
            <div v-if="activeTab === 'budget'" class="page-enter-active">
                <h1 class="page-title mb-8">ğŸ’° æ—…è²»ç®¡ç†</h1>
                
                <!-- é ç®—æ¦‚è¦½ -->
                <div class="hologram-card mb-8">
                    <h2 class="text-2xl font-bold mb-6">é ç®—æ¦‚è¦½</h2>
                    
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <span>ç¸½é ç®—</span>
                            <input 
                                type="number" 
                                v-model="budget" 
                                @change="saveBudget"
                                class="cyber-input w-40 text-right"
                            >
                        </div>
                        
                        <div class="mb-6">
                            <div class="flex justify-between text-gray-300 mb-2">
                                <span>å·²èŠ±è²»</span>
                                <span class="amount-neon">Â¥{{ totalExpenses.toLocaleString() }}</span>
                            </div>
                            <div class="neon-progress">
                                <div class="neon-progress-bar" :style="{ width: budgetUsedPercentage + '%' }"></div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between text-lg">
                            <span>å‰©é¤˜é ç®—</span>
                            <span class="text-green-400 font-bold">Â¥{{ remainingBudget.toLocaleString() }}</span>
                        </div>
                    </div>
                </div>
                
                <!-- æ”¯å‡ºè¨˜éŒ„ -->
                <div class="hologram-card">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">æ”¯å‡ºè¨˜éŒ„</h2>
                        <button @click="showAddExpenseModal = true" class="neon-btn px-4 py-2">
                            <i class="fas fa-plus mr-2"></i>æ–°å¢
                        </button>
                    </div>
                    
                    <!-- ç¯©é¸å™¨ -->
                    <div class="flex mb-6 overflow-x-auto pb-3">
                        <button 
                            v-for="day in expenseDays" 
                            :key="day.id"
                            @click="selectedExpenseDay = day.id"
                            :class="['px-4 py-2 rounded-full mr-3 whitespace-nowrap font-medium', selectedExpenseDay === day.id ? 'bg-cyan-600 text-white' : 'bg-gray-800 text-gray-300']"
                        >
                            {{ day.name }}
                        </button>
                    </div>
                    
                    <!-- æ”¯å‡ºåˆ—è¡¨ -->
                    <div v-if="filteredExpenses.length === 0" class="text-center py-10 text-gray-500">
                        <i class="fas fa-receipt text-5xl mb-4 text-gray-700"></i>
                        <p class="text-gray-500">æ²’æœ‰ç›¸é—œçš„æ”¯å‡ºç´€éŒ„</p>
                    </div>
                    
                    <div v-else class="space-y-4">
                        <div v-for="(expense, index) in filteredExpenses" :key="index" class="bg-gray-900/50 p-4 rounded-xl border border-gray-800">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="font-bold text-white text-lg">{{ expense.description }}</div>
                                    <div class="text-sm text-gray-400 mt-1">
                                        <span class="cyber-tag">{{ getCategoryName(expense.category) }}</span>
                                        <span class="cyber-tag">{{ getPaymentMethodName(expense.paymentMethod) }}</span>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="amount-neon">Â¥{{ expense.amount.toLocaleString() }}</div>
                                    <div class="text-xs text-gray-500 mt-1">{{ expense.date }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è³¼ç‰©æ¸…å–®é é¢ -->
            <div v-if="activeTab === 'shopping'" class="page-enter-active">
                <h1 class="page-title mb-8">ğŸ›ï¸ è³¼ç‰©æ¸…å–®</h1>
                
                <div class="hologram-card">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">å¾…è³¼å•†å“</h2>
                        <button @click="showAddShoppingItemModal = true" class="neon-btn px-4 py-2">
                            <i class="fas fa-plus mr-2"></i>æ–°å¢
                        </button>
                    </div>
                    
                    <div v-if="shoppingList.length === 0" class="text-center py-10 text-gray-500">
                        <i class="fas fa-shopping-bag text-5xl mb-4 text-gray-700"></i>
                        <p class="text-gray-500">è³¼ç‰©æ¸…å–®æ˜¯ç©ºçš„</p>
                    </div>
                    
                    <div v-else class="space-y-4">
                        <div v-for="(item, index) in shoppingList" :key="index" class="shopping-holo">
                            <div class="flex-shrink-0 mr-4">
                                <div class="w-16 h-16 rounded-lg bg-gradient-to-br from-cyan-500 to-pink-500 flex items-center justify-center">
                                    <i class="fas fa-shopping-bag text-white text-2xl"></i>
                                </div>
                            </div>
                            
                            <div class="flex-grow">
                                <div class="font-bold text-white text-lg mb-2">{{ item.name }}</div>
                                <div class="text-sm text-gray-300 mb-1">
                                    <i class="fas fa-store mr-2"></i>{{ item.store }}
                                </div>
                                <div class="text-sm text-gray-300">
                                    <i class="fas fa-map-marker-alt mr-2"></i>{{ item.location }}
                                </div>
                            </div>
                            
                            <div class="text-right">
                                <div class="amount-neon">Â¥{{ item.price.toLocaleString() }}</div>
                                <div class="mt-2">
                                    <span v-if="item.purchased" class="text-xs bg-green-900/50 text-green-400 px-3 py-1 rounded-full">
                                        <i class="fas fa-check mr-1"></i>å·²è³¼è²·
                                    </span>
                                    <span v-else class="text-xs bg-pink-900/50 text-pink-400 px-3 py-1 rounded-full">
                                        <i class="fas fa-clock mr-1"></i>å¾…è³¼è²·
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è³‡è¨Šé é¢ -->
            <div v-if="activeTab === 'info'" class="page-enter-active">
                <h1 class="page-title mb-8">â„¹ï¸ æ—…è¡Œè³‡è¨Š</h1>
                
                <!-- å¤©æ°£å¡ç‰‡ -->
                <div class="weather-holo hologram-card mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold mb-2">æ±äº¬å¤©æ°£</h2>
                            <div class="text-5xl font-bold">{{ currentWeather.temp }}Â°C</div>
                            <div class="text-lg mt-2">{{ currentWeather.condition }}</div>
                        </div>
                        <i :class="currentWeather.icon" class="text-7xl text-cyan-400"></i>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4">
                        <div class="text-center bg-gray-900/50 p-3 rounded-xl">
                            <div class="text-sm text-gray-300">æ¿•åº¦</div>
                            <div class="font-bold text-xl">{{ currentWeather.humidity }}%</div>
                        </div>
                        <div class="text-center bg-gray-900/50 p-3 rounded-xl">
                            <div class="text-sm text-gray-300">é¢¨é€Ÿ</div>
                            <div class="font-bold text-xl">{{ currentWeather.windSpeed }} km/h</div>
                        </div>
                        <div class="text-center bg-gray-900/50 p-3 rounded-xl">
                            <div class="text-sm text-gray-300">é«”æ„Ÿ</div>
                            <div class="font-bold text-xl">{{ currentWeather.feelsLike }}Â°C</div>
                        </div>
                    </div>
                    
                    <button @click="fetchWeather" class="neon-btn w-full mt-6">
                        <i class="fas fa-sync-alt mr-2"></i> æ›´æ–°å¤©æ°£
                    </button>
                </div>
                
                <!-- åŒ¯ç‡è³‡è¨Š -->
                <div class="hologram-card mb-8">
                    <h2 class="text-2xl font-bold mb-6">åŒ¯ç‡ï¼ˆä»Šæ—¥ï¼‰</h2>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-900/50 p-4 rounded-xl text-center">
                            <div class="text-sm text-gray-300 mb-2">æ¸¯å¹£ HKD</div>
                            <div class="font-bold text-xl">1 HKD â‰ˆ {{ exchangeRates.hkd }} JPY</div>
                        </div>
                        <div class="bg-gray-900/50 p-4 rounded-xl text-center">
                            <div class="text-sm text-gray-300 mb-2">æ–°å°å¹£ TWD</div>
                            <div class="font-bold text-xl">1 TWD â‰ˆ {{ exchangeRates.twd }} JPY</div>
                        </div>
                    </div>
                </div>
                
                <!-- å¯¦ç”¨è³‡è¨Š -->
                <div class="hologram-card">
                    <h2 class="text-2xl font-bold mb-6">å¯¦ç”¨è³‡è¨Š</h2>
                    <div class="space-y-4">
                        <div class="bg-gray-900/50 p-4 rounded-xl">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-cyan-900/50 flex items-center justify-center mr-3">
                                    <i class="fas fa-train text-cyan-400"></i>
                                </div>
                                <div class="font-bold text-white">äº¤é€šICå¡</div>
                            </div>
                            <div class="text-gray-300">Suicaæˆ–Pasmoå¡å¯ç”¨æ–¼åœ°éµã€å·´å£«å’Œè³¼ç‰©ã€‚</div>
                        </div>
                        <div class="bg-gray-900/50 p-4 rounded-xl">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-pink-900/50 flex items-center justify-center mr-3">
                                    <i class="fas fa-credit-card text-pink-400"></i>
                                </div>
                                <div class="font-bold text-white">æ”¯ä»˜æ–¹å¼</div>
                            </div>
                            <div class="text-gray-300">ç¾é‡‘ã€ICå¡ã€ä¿¡ç”¨å¡ã€Alipayåœ¨æ±äº¬æ™®éæ¥å—ã€‚</div>
                        </div>
                        <div class="bg-gray-900/50 p-4 rounded-xl">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-green-900/50 flex items-center justify-center mr-3">
                                    <i class="fas fa-shopping-cart text-green-400"></i>
                                </div>
                                <div class="font-bold text-white">å…ç¨…è³¼ç‰©</div>
                            </div>
                            <div class="text-gray-300">è³¼ç‰©æ»¿5,000æ—¥åœ“ï¼ˆä¸å«ç¨…ï¼‰å¯è¾¦ç†å…ç¨…æ‰‹çºŒã€‚</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç”±æ–¼ç¯‡å¹…é™åˆ¶ï¼ŒVue.jsä»£ç¢¼éƒ¨åˆ†èˆ‡ä¹‹å‰ç‰ˆæœ¬åŠŸèƒ½ç›¸åŒï¼Œåƒ…éœ€èª¿æ•´éƒ¨åˆ†æ¨£å¼é¡å -->
    <script>
        const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;
        
        createApp({
            setup() {
                // æ‡‰ç”¨æ¨™é¡Œ
                const appTitle = ref('æ±äº¬æ—…è¨˜');
                const showEditTitleModal = ref(false);
                
                // æ´»å‹•é é¢
                const activeTab = ref('schedule');
                
                // å´é‚Šå°èˆªæ¨™ç±¤
                const tabs = [
                    { id: 'schedule', name: 'è¡Œç¨‹', icon: 'fas fa-calendar-day' },
                    { id: 'map', name: 'åœ°åœ–', icon: 'fas fa-map' },
                    { id: 'budget', name: 'è¨˜å¸³', icon: 'fas fa-receipt' },
                    { id: 'shopping', name: 'è³¼ç‰©', icon: 'fas fa-shopping-bag' },
                    { id: 'info', name: 'è³‡è¨Š', icon: 'fas fa-info-circle' }
                ];
                
                // èˆªç­è³‡è¨Š
                const flightInfo = ref({
                    departure: {
                        title: 'å‡ºç™¼',
                        type: 'éš¨å¿ƒé£›',
                        departureTime: '10:50',
                        departureCode: 'HKG',
                        departureAirport: 'é¦™æ¸¯åœ‹éš›æ©Ÿå ´',
                        departureTerminal: 'å®¢é‹å¤§æ¨“ 1',
                        duration: '4h 5m',
                        flightNumber: 'U0870',
                        arrivalTime: '15:55',
                        arrivalCode: 'NRT',
                        arrivalAirport: 'æˆç”°åœ‹éš›æ©Ÿå ´',
                        arrivalTerminal: 'å®¢é‹å¤§æ¨“ 2'
                    },
                    return: {
                        title: 'å›ç¨‹',
                        type: 'éš¨å¿ƒé£›',
                        departureTime: '23:55',
                        departureCode: 'HND',
                        departureAirport: 'ç¾½ç”°åœ‹éš›æ©Ÿå ´',
                        departureTerminal: 'å®¢é‹å¤§æ¨“ 3',
                        duration: '5h 20m',
                        flightNumber: 'U0623',
                        arrivalTime: '04:15',
                        arrivalCode: 'HKG',
                        arrivalAirport: 'é¦™æ¸¯åœ‹éš›æ©Ÿå ´',
                        arrivalTerminal: 'å®¢é‹å¤§æ¨“ 1'
                    }
                });
                
                const showEditFlightModal = ref(false);
                
                // 4æ—¥è¡Œç¨‹å®‰æ’ - æ›´æ–°ç‚º1æœˆæ—¥æœŸ
                const tripDays = [
                    { id: 1, date: '15', day: 'é€±ä¸‰', area: 'æ± è¢‹' },
                    { id: 2, date: '16', day: 'é€±å››', area: 'æ©«æ¿±' },
                    { id: 3, date: '17', day: 'é€±äº”', area: 'æ–°å®¿' },
                    { id: 4, date: '18', day: 'é€±å…­', area: 'æ¾€è°·' }
                ];
                
                const selectedDay = ref(1);
                
                // è¡Œç¨‹é …ç›®æ•¸æ“š
                const scheduleData = ref({
                    1: {
                        items: [
                            { time: '09:00', title: 'æ± è¢‹å¤ªé™½åŸ', location: 'æ± è¢‹å¤ªé™½åŸ', note: 'è³¼ç‰©ä¸­å¿ƒèˆ‡è§€æ™¯å°' },
                            { time: '12:00', title: 'åˆé¤ - ç„¡æ•µå®¶æ‹‰éºµ', location: 'æ± è¢‹', note: 'äººæ°£æ‹‰éºµåº—' },
                            { time: '14:00', title: 'æ± è¢‹é€›è¡—', location: 'æ± è¢‹æ±å£å•†åº—è¡—', note: 'å‹•æ¼«å•†å“èˆ‡è—¥å¦' },
                            { time: '16:00', title: 'Sunshineæ°´æ—é¤¨', location: 'æ± è¢‹å¤ªé™½åŸ', note: 'éƒ½å¸‚å‹æ°´æ—é¤¨' },
                            { time: '19:00', title: 'æ™šé¤', location: 'æ± è¢‹å±…é…’å±‹', note: 'é«”é©—æ—¥æœ¬å±…é…’å±‹æ–‡åŒ–' }
                        ]
                    },
                    2: {
                        items: [
                            { time: '14:00', title: 'å‰å¾€æ©«æ¿±', location: 'æ± è¢‹é§…', note: 'ä¹˜åJRæ¹˜å—æ–°å®¿ç·š' },
                            { time: '15:30', title: 'æ©«æ¿±æ¼”å”±æœƒ', location: 'æ©«æ¿±é«”è‚²é¤¨', note: 'æ¼”å”±æœƒæ´»å‹•' },
                            { time: '20:00', title: 'æ™šé¤', location: 'æ©«æ¿±ä¸­è¯è¡—', note: 'æ—¥æœ¬æœ€å¤§ä¸­è¯è¡—' },
                            { time: '22:00', title: 'è¿”å›æ±äº¬', location: 'æ©«æ¿±é§…', note: 'ä¹˜åJRäº¬æ¿±æ±åŒ—ç·š' }
                        ]
                    },
                    3: {
                        items: [
                            { time: '09:00', title: 'æ–°å®¿å¾¡è‹‘', location: 'æ–°å®¿', note: 'æ—¥å¼åº­åœ’æ•£æ­¥' },
                            { time: '11:00', title: 'æ–°å®¿é€›è¡—', location: 'æ–°å®¿ä¼Šå‹¢ä¸¹', note: 'ç™¾è²¨å…¬å¸è³¼ç‰©' },
                            { time: '13:00', title: 'åˆé¤', location: 'æ–°å®¿é»ƒé‡‘è¡—', note: 'å°å··ç¾é£Ÿæ¢ç´¢' },
                            { time: '15:00', title: 'æ±äº¬éƒ½å»³å±•æœ›å°', location: 'æ–°å®¿', note: 'å…è²»è§€æ™¯å°' },
                            { time: '17:00', title: 'æ­Œèˆä¼ç”º', location: 'æ–°å®¿', note: 'é«”é©—æ±äº¬å¤œç”Ÿæ´»' }
                        ]
                    },
                    4: {
                        items: [
                            { time: '10:00', title: 'æ¾€è°·åå­—è·¯å£', location: 'æ¾€è°·', note: 'ä¸–ç•Œæœ€ç¹å¿™åå­—è·¯å£' },
                            { time: '11:00', title: 'å¿ çŠ¬å…«å…¬åƒ', location: 'æ¾€è°·ç«™å‰', note: 'æ‹ç…§ç•™å¿µ' },
                            { time: '12:00', title: 'åˆé¤', location: 'æ¾€è°·ç¾é£Ÿè¡—', note: '' },
                            { time: '14:00', title: 'æ¾€è°·è³¼ç‰©', location: 'æ¾€è°·109', note: 'æ™‚å°šè³¼ç‰©ä¸­å¿ƒ' },
                            { time: '16:00', title: 'åŸå®¿ç«¹ä¸‹é€š', location: 'åŸå®¿', note: 'æ½®æµæ–‡åŒ–é«”é©—' },
                            { time: '18:00', title: 'å‰å¾€ç¾½ç”°æ©Ÿå ´', location: 'æ¾€è°·é§…', note: 'ä¹˜åäº¬æ€¥ç·š' },
                            { time: '21:00', title: 'è¾¦ç†ç™»æ©Ÿæ‰‹çºŒ', location: 'ç¾½ç”°æ©Ÿå ´', note: 'èˆªç­U0623' }
                        ]
                    }
                });
                
                // å¤©æ°£è³‡è¨Š
                const currentWeather = ref({
                    temp: 8,
                    condition: 'æ™´å¤©',
                    humidity: 60,
                    windSpeed: 10,
                    feelsLike: 6,
                    icon: 'fas fa-sun',
                    updateTime: '15:30'
                });
                
                const selectedDayWeather = computed(() => {
                    const day = tripDays.find(d => d.id === selectedDay.value);
                    return {
                        ...currentWeather.value,
                        area: day ? day.area : 'æ±äº¬'
                    };
                });
                
                // åŒ¯ç‡è³‡è¨Š
                const exchangeRates = ref({
                    hkd: 18.5,
                    twd: 4.3
                });
                
                // è¨ˆç®—æ¸¯å…ƒé‡‘é¡
                const calculateHKD = (jpyAmount) => {
                    const rate = 0.055; // 1 JPY = 0.055 HKD
                    return (jpyAmount * rate).toFixed(2);
                };
                
                // åœ°åœ–ç›¸é—œ
                const searchLocation = ref('');
                const startLocation = ref('æ± è¢‹é§…');
                const endLocation = ref('æ–°å®¿é§…');
                
                // è¨˜å¸³ç›¸é—œ
                const budget = ref(150000);
                const expenses = ref([
                    { description: 'æ©Ÿå ´åˆé¤', amount: 1200, category: 'food', paymentMethod: 'cash', date: '1/15' },
                    { description: 'åœ°éµä¸€æ—¥åˆ¸', amount: 800, category: 'transport', paymentMethod: 'ic', date: '1/15' },
                    { description: 'è—¥å¦è³¼ç‰©', amount: 4500, category: 'shopping', paymentMethod: 'credit', date: '1/15' },
                    { description: 'æ™šé¤å±…é…’å±‹', amount: 3200, category: 'food', paymentMethod: 'alipay', date: '1/15' },
                    { description: 'æ± è¢‹å¤ªé™½åŸé–€ç¥¨', amount: 1000, category: 'entertainment', paymentMethod: 'cash', date: '1/15' },
                    { description: 'æ¼”å”±æœƒé–€ç¥¨', amount: 8000, category: 'entertainment', paymentMethod: 'credit', date: '1/16' },
                    { description: 'æ©«æ¿±äº¤é€šè²»', amount: 1200, category: 'transport', paymentMethod: 'ic', date: '1/16' },
                    { description: 'ä¸­è¯è¡—æ™šé¤', amount: 2800, category: 'food', paymentMethod: 'alipay', date: '1/16' },
                    { description: 'æ¼”å”±æœƒå‘¨é‚Š', amount: 3500, category: 'merchandise', paymentMethod: 'cash', date: '1/16' }
                ]);
                
                const expenseCategories = [
                    { id: 'all', name: 'å…¨éƒ¨' },
                    { id: 'food', name: 'é¤é£²' },
                    { id: 'transport', name: 'äº¤é€š' },
                    { id: 'shopping', name: 'è³¼ç‰©' },
                    { id: 'entertainment', name: 'å¨›æ¨‚' },
                    { id: 'merchandise', name: 'å‘¨é‚Š' },
                    { id: 'ticket', name: 'æ©Ÿç¥¨' },
                    { id: 'insurance', name: 'ä¿éšª' },
                    { id: 'machine', name: 'æ©Ÿå°' },
                    { id: 'other', name: 'å…¶ä»–' }
                ];
                
                const expenseDays = [
                    { id: 'all', name: 'å…¨éƒ¨' },
                    { id: '1/15', name: '1/15' },
                    { id: '1/16', name: '1/16' },
                    { id: '1/17', name: '1/17' },
                    { id: '1/18', name: '1/18' }
                ];
                
                const selectedExpenseDay = ref('all');
                
                const paymentMethods = [
                    { id: 'all', name: 'å…¨éƒ¨' },
                    { id: 'cash', name: 'ç¾é‡‘' },
                    { id: 'ic', name: 'ICå¡' },
                    { id: 'credit', name: 'ä¿¡ç”¨å¡' },
                    { id: 'alipay', name: 'Alipay' }
                ];
                
                const selectedPaymentMethod = ref('all');
                
                // æ–°å¢æ”¯å‡º
                const showAddExpenseModal = ref(false);
                const newExpense = ref({
                    description: '',
                    amount: null,
                    category: 'food',
                    paymentMethod: 'cash',
                    date: '1/15'
                });
                
                // è³¼ç‰©æ¸…å–®
                const shoppingList = ref([
                    { name: 'CEZANNE 101è™Ÿå”‡è†', price: 3000, store: 'æ¾æœ¬æ¸…è—¥å¦åº—', location: 'æ¾€è°·åº—', purchased: false, image: '' },
                    { name: 'ç™½è‰²æˆ€äººå·§å…‹åŠ›', price: 1500, store: 'æ©Ÿå ´å…ç¨…åº—', location: 'æˆç”°æ©Ÿå ´', purchased: false, image: '' },
                    { name: 'æ—¥æœ¬æŠ¹èŒ¶ç²‰', price: 800, store: 'æ·ºè‰å•†åº—è¡—', location: 'æ·ºè‰', purchased: true, image: '' }
                ]);
                
                // æ–°å¢è³¼ç‰©é …ç›®
                const showAddShoppingItemModal = ref(false);
                const editingShoppingItemIndex = ref(null);
                const newShoppingItem = ref({
                    name: '',
                    price: null,
                    store: '',
                    location: ''
                });
                
                // è¨ˆç®—å±¬æ€§
                const selectedDaySchedule = computed(() => {
                    return scheduleData.value[selectedDay.value];
                });
                
                const filteredExpenses = computed(() => {
                    let filtered = expenses.value;
                    
                    // æŒ‰æ—¥æœŸç¯©é¸
                    if (selectedExpenseDay.value !== 'all') {
                        filtered = filtered.filter(expense => expense.date === selectedExpenseDay.value);
                    }
                    
                    // æŒ‰ä»˜æ¬¾æ–¹å¼ç¯©é¸
                    if (selectedPaymentMethod.value !== 'all') {
                        filtered = filtered.filter(expense => expense.paymentMethod === selectedPaymentMethod.value);
                    }
                    
                    return filtered;
                });
                
                const totalExpenses = computed(() => {
                    return expenses.value.reduce((total, expense) => total + expense.amount, 0);
                });
                
                const remainingBudget = computed(() => {
                    return budget.value - totalExpenses.value;
                });
                
                const budgetUsedPercentage = computed(() => {
                    if (budget.value <= 0) return 0;
                    return Math.min(100, Math.round((totalExpenses.value / budget.value) * 100));
                });
                
                // æ–¹æ³•
                const editAppTitle = () => {
                    showEditTitleModal.value = true;
                };
                
                const saveAppTitle = () => {
                    showEditTitleModal.value = false;
                    saveToLocalStorage();
                };
                
                const editFlightInfo = () => {
                    showEditFlightModal.value = true;
                };
                
                const saveFlightInfo = () => {
                    showEditFlightModal.value = false;
                    saveToLocalStorage();
                };
                
                const openGoogleMaps = () => {
                    const start = startLocation.value || 'æ±äº¬';
                    const end = endLocation.value || 'æ±äº¬';
                    const url = `https://www.google.com/maps/dir/${encodeURIComponent(start)}/${encodeURIComponent(end)}`;
                    window.open(url, '_blank');
                };
                
                const searchOnMap = () => {
                    if (!searchLocation.value.trim()) return;
                    const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(searchLocation.value + ' æ±äº¬')}`;
                    window.open(url, '_blank');
                };
                
                // å¤©æ°£æ–¹æ³•
                const fetchWeather = () => {
                    // æ¨¡æ“¬å¤©æ°£APIå‘¼å«
                    const weatherConditions = [
                        { temp: 8, condition: 'æ™´å¤©', humidity: 60, windSpeed: 10, feelsLike: 6, icon: 'fas fa-sun' },
                        { temp: 6, condition: 'å¤šé›²', humidity: 65, windSpeed: 8, feelsLike: 4, icon: 'fas fa-cloud' },
                        { temp: 5, condition: 'ä¸‹é›¨', humidity: 75, windSpeed: 12, feelsLike: 3, icon: 'fas fa-cloud-rain' },
                        { temp: 7, condition: 'å¤šé›²æ™‚æ™´', humidity: 68, windSpeed: 6, feelsLike: 5, icon: 'fas fa-cloud-sun' }
                    ];
                    
                    const randomWeather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
                    const now = new Date();
                    const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                    
                    currentWeather.value = {
                        ...randomWeather,
                        updateTime: timeString
                    };
                    
                    // é¡¯ç¤ºé€šçŸ¥
                    alert(`å¤©æ°£å·²æ›´æ–°: ${randomWeather.temp}Â°C, ${randomWeather.condition}`);
                };
                
                // æ”¯å‡ºç®¡ç†æ–¹æ³•
                const saveBudget = () => {
                    if (budget.value < 0) {
                        budget.value = 0;
                    }
                    saveToLocalStorage();
                };
                
                const getCategoryName = (categoryId) => {
                    const category = expenseCategories.find(c => c.id === categoryId);
                    return category ? category.name : 'å…¶ä»–';
                };
                
                const getPaymentMethodName = (methodId) => {
                    const method = paymentMethods.find(m => m.id === methodId);
                    return method ? method.name : 'å…¶ä»–';
                };
                
                const addExpense = () => {
                    if (!newExpense.value.description || !newExpense.value.amount) {
                        alert('è«‹å¡«å¯«æè¿°å’Œé‡‘é¡');
                        return;
                    }
                    
                    expenses.value.push({
                        description: newExpense.value.description,
                        amount: parseInt(newExpense.value.amount),
                        category: newExpense.value.category,
                        paymentMethod: newExpense.value.paymentMethod,
                        date: newExpense.value.date
                    });
                    
                    newExpense.value = {
                        description: '',
                        amount: null,
                        category: 'food',
                        paymentMethod: 'cash',
                        date: '1/15'
                    };
                    
                    showAddExpenseModal.value = false;
                    saveToLocalStorage();
                };
                
                const deleteExpense = (index) => {
                    if (confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†æ”¯å‡ºå—ï¼Ÿ')) {
                        expenses.value.splice(index, 1);
                        saveToLocalStorage();
                    }
                };
                
                // è³¼ç‰©æ¸…å–®æ–¹æ³•
                const saveShoppingItem = () => {
                    if (!newShoppingItem.value.name || !newShoppingItem.value.price) {
                        alert('è«‹å¡«å¯«å•†å“åç¨±å’Œåƒ¹æ ¼');
                        return;
                    }
                    
                    if (editingShoppingItemIndex.value !== null) {
                        // æ›´æ–°ç¾æœ‰é …ç›®
                        const oldItem = shoppingList.value[editingShoppingItemIndex.value];
                        shoppingList.value[editingShoppingItemIndex.value] = {
                            name: newShoppingItem.value.name,
                            price: parseInt(newShoppingItem.value.price),
                            store: newShoppingItem.value.store,
                            location: newShoppingItem.value.location,
                            purchased: oldItem.purchased,
                            image: oldItem.image
                        };
                    } else {
                        // æ–°å¢é …ç›®
                        shoppingList.value.push({
                            name: newShoppingItem.value.name,
                            price: parseInt(newShoppingItem.value.price),
                            store: newShoppingItem.value.store,
                            location: newShoppingItem.value.location,
                            purchased: false,
                            image: ''
                        });
                    }
                    
                    closeShoppingModal();
                    saveToLocalStorage();
                };
                
                const editShoppingItem = (index) => {
                    const item = shoppingList.value[index];
                    newShoppingItem.value = {
                        name: item.name,
                        price: item.price,
                        store: item.store,
                        location: item.location
                    };
                    editingShoppingItemIndex.value = index;
                    showAddShoppingItemModal.value = true;
                };
                
                const deleteShoppingItem = (index) => {
                    if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹è³¼ç‰©é …ç›®å—ï¼Ÿ')) {
                        shoppingList.value.splice(index, 1);
                        saveToLocalStorage();
                    }
                };
                
                const closeShoppingModal = () => {
                    showAddShoppingItemModal.value = false;
                    editingShoppingItemIndex.value = null;
                    newShoppingItem.value = {
                        name: '',
                        price: null,
                        store: '',
                        location: ''
                    };
                };
                
                // æœ¬åœ°å„²å­˜
                const saveToLocalStorage = () => {
                    const data = {
                        appTitle: appTitle.value,
                        flightInfo: flightInfo.value,
                        scheduleData: scheduleData.value,
                        budget: budget.value,
                        expenses: expenses.value,
                        shoppingList: shoppingList.value
                    };
                    localStorage.setItem('tokyoTripAppData', JSON.stringify(data));
                };
                
                const loadFromLocalStorage = () => {
                    const savedData = localStorage.getItem('tokyoTripAppData');
                    if (savedData) {
                        try {
                            const data = JSON.parse(savedData);
                            if (data.appTitle) appTitle.value = data.appTitle;
                            if (data.flightInfo) flightInfo.value = data.flightInfo;
                            if (data.scheduleData) scheduleData.value = data.scheduleData;
                            if (data.budget) budget.value = data.budget;
                            if (data.expenses) expenses.value = data.expenses;
                            if (data.shoppingList) shoppingList.value = data.shoppingList;
                        } catch (e) {
                            console.error('è¼‰å…¥æœ¬åœ°å„²å­˜å¤±æ•—', e);
                        }
                    }
                };
                
                // åˆå§‹åŒ–
                onMounted(() => {
                    loadFromLocalStorage();
                    
                    // åˆå§‹åŒ–å¤©æ°£
                    fetchWeather();
                });
                
                return {
                    // ç‹€æ…‹è®Šé‡
                    appTitle,
                    showEditTitleModal,
                    activeTab,
                    tabs,
                    flightInfo,
                    showEditFlightModal,
                    tripDays,
                    selectedDay,
                    scheduleData,
                    selectedDaySchedule,
                    currentWeather,
                    selectedDayWeather,
                    exchangeRates,
                    searchLocation,
                    startLocation,
                    endLocation,
                    budget,
                    expenses,
                    expenseCategories,
                    expenseDays,
                    selectedExpenseDay,
                    paymentMethods,
                    selectedPaymentMethod,
                    showAddExpenseModal,
                    newExpense,
                    shoppingList,
                    showAddShoppingItemModal,
                    editingShoppingItemIndex,
                    newShoppingItem,
                    
                    // è¨ˆç®—å±¬æ€§
                    filteredExpenses,
                    totalExpenses,
                    remainingBudget,
                    budgetUsedPercentage,
                    
                    // æ–¹æ³•
                    editAppTitle,
                    saveAppTitle,
                    editFlightInfo,
                    saveFlightInfo,
                    openGoogleMaps,
                    searchOnMap,
                    fetchWeather,
                    saveBudget,
                    getCategoryName,
                    getPaymentMethodName,
                    addExpense,
                    deleteExpense,
                    saveShoppingItem,
                    editShoppingItem,
                    deleteShoppingItem,
                    closeShoppingModal,
                    calculateHKD
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
